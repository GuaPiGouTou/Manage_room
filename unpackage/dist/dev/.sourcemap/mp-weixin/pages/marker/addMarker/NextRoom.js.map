{"version":3,"file":"NextRoom.js","sources":["pages/marker/addMarker/NextRoom.vue","D:/文档/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbWFya2VyL2FkZE1hcmtlci9OZXh0Um9vbS52dWU"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n  \r\n\r\n    <!-- 房源基本信息 -->\r\n    <view class=\"section\">\r\n      <view class=\"section-title\">房间信息</view>\r\n\t   <view class=\"section-title\">房间数：{{roomCount+1}}/{{MaxCount}}</view>\r\n      <input class=\"input\" placeholder=\"房间号\" v-model=\"roomdata.RoomNumber\" />\r\n      <input class=\"input\" placeholder=\"具体地址\" v-model=\"roomdata.RoomAddress\" />\r\n      <input class=\"input\" type=\"number\" placeholder=\"面积（平方米）\" v-model=\"roomdata.RoomArea\" />\r\n      <input class=\"input\" placeholder=\"房型（如：2室1厅）\" v-model=\"roomdata.RoomType\" />\r\n    </view>\r\n\r\n    <!-- 支付选项 -->\r\n    <view class=\"section\">\r\n      <view class=\"section-title\">支付选项</view>\r\n      <view v-for=\"(value, key, index) in roomdata.RoomPayment\" :key=\"index\" class=\"payment-item\">\r\n        <input class=\"payment-input\" type=\"number\" :placeholder=\"`${key}价格`\" v-model=\"roomdata.RoomPayment[key]\" />\r\n        <text class=\"payment-label\">{{key==\"monthly\"?\"月付\":key==\"quarterly\"?\"半年付\":\"年付\"}}</text>\r\n      </view>\r\n      <!-- <button class=\"add-payment\" @tap=\"addPaymentOption\">+ 添加支付方式</button> -->\r\n    </view>\r\n\t<!-- 家电选项 -->\r\n    <view class=\"section\">\r\n      <view class=\"section-title\">家具选项</view>\r\n\t\t<view  class=\"houseclass\"  >\r\n\t\t\t<view v-for=\"index in 7\" :key=\"index\"\t>\r\n\t\t\t\t<view @click=\"onhouse(index)\" >\r\n\t\t\t\t\t<view class=\"houseitem\" v-if=\"roomdata.RoomFurniture[index]\">\r\n\t\t\t\t\t<text style=\"color: #4db0e4;\">{{houseName[index-1]}}</text>\r\n\t\t\t\t\t<image style=\"width: 80rpx; height: 100rpx;\"  :src=\"`/static/map/furniture/select/${index}.png`\"  ></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view class=\"houseitem\" v-else>\r\n\t\t\t\t\t<text>{{houseName[index-1]}}</text>\r\n\t\t\t\t\t<image style=\"width: 80rpx; height: 100rpx;\"  :src=\"`/static/map/furniture/de/${index}.png`\"  ></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\r\n\t\t\t\r\n\t\t</view>\r\n    </view>\r\n\t\r\n\t\r\n\t <!-- 上传按钮 -->\r\n\t<view class=\"section\">\r\n      <view class=\"section-title\">媒体上传</view>\r\n      <button class=\"location-btn\" @tap=\"selectvideo\">\r\n        <text>上传视频</text>\r\n      </button>\r\n\t\r\n\t\r\n\t <view style=\"display: flex; flex-wrap: wrap; padding: 10px;\">\r\n\t   <view \r\n\t     v-for=\"(item,index) in this.roomdata.RoomVideo\" \r\n\t     :key=\"index\" \r\n\t     style=\"width: 40%; margin: 0 5% 10px 5%;\"\r\n\t   >\r\n\t     <image \r\n\t       :src=\"item.thumbTempFilePath\" \r\n\t       mode=\"scaleToFill\" \r\n\t       style=\"width: 100%; height: 100px; background-color: #f5f5f5; border-radius: 4px;\" \r\n\t     />\r\n\t     \r\n\t     <view style=\"display: flex; justify-content: space-between; align-items: center; margin-top: 8px;\">\r\n\t       <text style=\"font-size: 12px; color: #666;\">\r\n\t         {{(item.size/1048576).toFixed(2)}}MB\r\n\t       </text>\r\n\t       \r\n\t       <button \r\n\t         @click=\"deleteFilePath(index)\" \r\n\t         type=\"warn\" \r\n\t         style=\"\r\n\t           width: 80px; \r\n\t           height: 30px; \r\n\t           padding: 0;\r\n\t           display: flex;\r\n\t           justify-content: center;\r\n\t           align-items: center;\r\n\t           font-size: 12px;\r\n\t           border-radius: 4px;\r\n\t         \">\r\n\t         删除\r\n\t       </button>\r\n\t     </view>\r\n\t   </view>\r\n\t </view>\r\n\t  \r\n\t\r\n\t\t<uni-popup ref=\"error\" type=\"bottom\" border-radius=\"10px 10px 0 0\">\r\n\t\t\t<view class=\"prop\">\r\n\t\t\t<image src=\"/static/index/error.png\" ></image>\r\n\t\t\t\t<text>{{msg}}</text>\r\n\t\t\t\t\t<button @tap=\"successbvideo_close \" type=\"primary\">返回</button>\r\n\t\t\t\t\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t\t<uni-popup ref=\"success\" type=\"bottom\" border-radius=\"10px 10px 0 0\">\r\n\t\t\t<view class=\"prop\">\r\n\t\t\t<image src=\"/static/index/success.png\" ></image>\r\n\t\t\t\t<text>{{msg}}</text>\r\n\t\t\t\t\t<button @tap=\"successbvideo_toMap \" type=\"primary\">完成</button>\r\n\t\t\t\t\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t\t\r\n\t\t\r\n    </view>\r\n\r\n\t<!-- 下一个房间页面按钮 -->\r\n    <button  v-if=\"roomCount+1-MaxCount==0\" class=\"submit-btn\" @tap=\"submitHouseInfo\">提交信息</button>\r\n    <button  v-else class=\"submit-btn\" @tap=\"NextRoom\">下一步</button>\r\n    <button class=\"submit-btn\" @tap=\"ReturnRoom\">上一步</button>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n\t\t  submitflag:false,\r\n\t\t  roomdata:{\r\n\t\t\t  RoomNumber:'',\r\n\t\t\t  RoomAddress: '',        \r\n\t\t\t  RoomArea: '',\r\n\t\t\t  RoomType: '',\r\n\t\t\t  RoomPayment:{\r\n\t\t\t\t  'monthly': 0,\r\n\t\t\t\t  'quarterly': 0,\r\n\t\t\t\t  'yearly': 0\r\n\t\t\t\t},\r\n\t\t\t  RoomFurniture:  [false, false, false, false,false,false,false],\r\n\t\t\t  RoomVideo: []// 提取文件路径\r\n\t\t  },\r\n\t\troomCount:null,\r\n\t\tMaxCount:null,\r\n        houseName:[\"浴缸\",\"花洒\",\"冰箱\",\"空调\",\"微波炉\",\"洗衣机\",\"油烟机\"],\r\n\t\tfilepath:[],\r\n\t\tmsg:null\r\n      }\r\n    },\r\n\tonLoad() {\r\n\t\tthis.roomCount =  this.$store.state.currentRoomIndex\r\n\t\tthis.MaxCount  =  this.$store.state.baseInfo.roomcount\r\n\t\tconsole.log(\"onLoad\")\r\n\t\tconsole.log(this.$store.state.rooms)\r\n\t\tif(this.$store.state.rooms[this.roomCount] !=null)\r\n\t\t{\r\n\t\t\tthis.roomdata  =  this.$store.state.rooms[this.roomCount]  \r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t},\r\n\tonUnload() {\r\n\r\n\t\t console.log(this.roomdata)\r\n\t\t if(this.roomdata.RoomNumber.trim()!=null||this.roomdata.RoomAddress.trim()!=null||this.roomdata.RoomType.trim()!=null)\r\n\t\t {\r\n\t\t\t \tthis.$store.commit('UPDATE_ROOM',{index:this.roomCount,data:this.roomdata})\r\n\t\t\t \tthis.$store.commit('UPDATE_BASEROOMS',{index:this.roomCount,data:this.roomdata})\r\n\t\t\t\r\n\t\t }\r\n\t\r\n\t},\r\n    methods: {\r\n\t\t//跳转上一个房间\r\n\t\tReturnRoom(){\r\n\t\tif(this.roomCount+1>1)\r\n\t\t{\r\n\t\t\tthis.$store.commit('SET_CURRENT_ROOM_INDEX',this.roomCount-1)\r\n\t\t\tuni.redirectTo({\r\n\t\t\t\turl:\"/pages/marker/addMarker/NextRoom\"\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tuni.redirectTo({\r\n\t\t\t\turl:\"/pages/marker/addMarker/addMarker\"\r\n\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t\t},\r\n\t\t//跳转下一个房间\r\n\t\tNextRoom(){\r\n\t\t\tif(this.roomCount+1<this.MaxCount)\r\n\t\t\t{\tconsole.log(this.roomdata)\r\n\t\t\t\tif(this.roomdata.RoomNumber.trim()!=null&&this.roomdata.RoomAddress.trim()!=null&&this.roomdata.RoomType.trim())\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.$store.commit('SET_CURRENT_ROOM_INDEX',this.roomCount+1)\r\n\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\turl:\"/pages/marker/addMarker/NextRoom\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.msg = \"当前房间未完成填写\"\r\n\t\t\t\t\tthis.$refs.error.open(\"center\")\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tthis.msg = \"当前房间已经为最后一个房间！\"\r\n\t\t\t\tthis.$refs.error.open(\"center\")\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t//删除视频路径\r\n\t\tdeleteFilePath(index){\r\n\t\t\tthis.roomdata.RoomVideo.splice(index, 1)\r\n\t\t},\r\n\t\t//点击家具\r\n\t\tonhouse(index){\r\n\t\t\tthis.roomdata.RoomFurniture[index] = !this.roomdata.RoomFurniture[index];\r\n\t\t},\r\n\t\t//关闭弹窗\r\n\t\tsuccessbvideo_close(){\r\n\t\t\t this.$refs.error.close('center');\r\n\t\t},\r\n\t\tsuccessbvideo_toMap(){\r\n\t\t\t this.$refs.success.close('center');\r\n\t\t\t  uni.redirectTo({\r\n\t\t\t               \turl:\"/pages/map/map\"\r\n\t\t\t               })\r\n\t\t},\r\n\t\t//上传视频\r\n\t\tselectvideo(){\r\n\t\t\tif(this.roomdata.RoomVideo.length<3)\r\n\t\t\t{\r\n\t\t\t\t// 将视频选择完毕后的路径保存并展示出\r\n\t\t\t\tvar flag  = true\r\n\t\t\t\twx.chooseMedia({\r\n\t\t\t\t\tcount:3,\r\n\t\t\t\t\tmediaType:[\"video\"],\r\n\t\t\t\t\tmaxDuration:60,\r\n\t\t\t\t\tsuccess:(res)=> {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconsole.log(res.tempFiles[0].size/1048576)\r\n\t\t\t\t\t\tthis.roomdata.RoomVideo.push(...res.tempFiles)\r\n\t\t\t\t\t\tconsole.log(\"chooseMedia_Success\")\r\n\t\t\t\t\t\tconsole.log(this.roomdata.RoomVideo)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail:(res)=>{\r\n\t\t\t\t\t\tconsole.log(\"chooseMedia\")\r\n\t\t\t\t\t\tflag=false\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tif(flag){\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n      // 选择地图位置\r\n      chooseLocation() {\r\n        uni.authorize({\r\n          scope: 'scope.userLocation',\r\n          success: () => {\r\n            uni.chooseLocation({\r\n              type: 'gcj02',\r\n              success: (res) => {\r\n                this.RoomAddress = res.name;\r\n                this.longitude = res.longitude;\r\n                this.latitude = res.latitude;\r\n                \r\n                // 自动填充具体地点\r\n                  this.location = res.address;\r\n                \r\n              },\r\n              fail: (err) => {\r\n                uni.showToast({\r\n                  title: '位置选择失败',\r\n                  icon: 'none'\r\n                });\r\n              }\r\n            });\r\n          },\r\n          fail: () => {\r\n            uni.showModal({\r\n              title: '权限提示',\r\n              content: '需要位置权限才能选择地点，请开启权限',\r\n              confirmText: '去设置',\r\n              success: (res) => {\r\n                if (res.confirm) {\r\n                  uni.openSetting();\r\n                }\r\n              }\r\n            });\r\n          }\r\n        });\r\n      },\r\n      \r\n      // 添加支付方式\r\n      addPaymentOption() {\r\n        uni.showModal({\r\n          title: '添加支付方式',\r\n          content: '输入支付方式名称（如：半年付）',\r\n          editable: true,\r\n          success: (res) => {\r\n            if (res.confirm && res.content) {\r\n              const key = res.content.trim();\r\n              if (key && !this.RoomFurniture[key]) {\r\n                this.$set(this.RoomFurniture, key, 0);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      },\r\n      \r\n\t  \r\n      // 提交房源信息\r\n       submitHouseInfo() {\r\n\t\t   //验证信息\r\n\t\t  // if(!this.houseInfoVerify()) return;\r\n\t\t  if(!this.roomsVerify()) return;\r\n\t\t  this.submitVideo().then(()=>{\r\n\t\t\t  // 上传表单\r\n\t\t\t  \tconsole.log(\"-----submit----\")\r\n\t\t\t  console.log(this.$store.state.baseInfo)\r\n\t\t\t  this.sumbit()\r\n\t\t  })\r\n\t\t\t\r\n\t\r\n\t\t\t  \r\n      \r\n      },\r\n\t  //视频上传\r\n\tasync  submitVideo(){\r\n\t\t // 先检查权限（iOS 需要）\r\n\t\t  try {\r\n\t\t    const res = await uni.getSetting();\r\n\t\t    if (!res.authSetting['scope.writePhotosAlbum']) {\r\n\t\t      await uni.authorize({\r\n\t\t        scope: 'scope.writePhotosAlbum'\r\n\t\t      });\r\n\t\t    }\r\n\t\t  } catch (err) {\r\n\t\t   if (err.errCode === -503002) {\r\n\t\t       uni.showModal({\r\n\t\t         title: '提示',\r\n\t\t         content: '需要您授权访问相册和存储才能上传视频',\r\n\t\t         confirmText: '去设置',\r\n\t\t         success: (res) => {\r\n\t\t           if (res.confirm) {\r\n\t\t             uni.openSetting(); // 打开设置页面让用户手动开启权限\r\n\t\t           }\r\n\t\t         }\r\n\t\t       });\r\n\t\t     }\r\n\t\t  }\r\n\t\t  \r\n\t\t   uni.showLoading({ title: '视频上传中...', mask: true });\r\n\t\t   let rooms = this.$store.state.baseInfo.room;\r\n\t\t   let house = this.$store.state.baseInfo;\r\n\t\t\t\r\n\t\t\tlet p =\trooms.map((item,index)=>{\r\n\t\t\t\treturn\tthis.VideoUp(house,item).then((res)=>{\r\n\t\t\t\t\tlet room = item\r\n\t\t\t\t\troom.RoomVideo = []\r\n\t\t\t\t\tres.forEach((item,index)=>{room.RoomVideo[index] = item})\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.$store.commit('UPDATE_BASEROOMS',{index:index,data:room}) \r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log(this.$store.state.baseInfo.room[index])\r\n\t\t\t\t\tconsole.log(\"---------\")\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tawait Promise.all(p)\r\n\t\t\tuni.hideLoading();\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle:\"上传成功\",\r\n\t\t\t\ticon:'success'\r\n\t\t\t})\r\n\t\t\t\tconsole.log(\"----base-----\")\r\n\t\t\tconsole.log(this.$store.state.baseInfo)\t\t\t\r\n\t\t\t   \tconsole.log(\"-----rooms----\")\r\n\t\t\tconsole.log(this.$store.state.rooms)\t\t\t   \r\n\t\t\r\n\t\t\t\r\n\t\t\r\n\t\t   \r\n\t\t   \r\n\t\t\r\n\t  },\r\n\t  \r\n\t // 单独封装的视频上传方法（异步）\r\n\t async VideoUp(title,room){\r\n\t\t let fileID = []\r\n\t\troom.RoomVideo.forEach((item,index)=>{\r\n\t\t\tlet cloudPath = \"map/\"+title+\"_\"+index+\".mp4\";\r\n\t\t\tlet filePath =item.tempFilePath;\r\n\t\t\tlet p =wx.cloud.uploadFile({\r\n\t\t\t\tcloudPath:cloudPath,\r\n\t\t\t\tfilePath:filePath,\r\n\t\t\t\tconfig: {\r\n\t\t\t\t    env: 'prod-7g3ji5ui73a4702f' // 显式指定环境ID\r\n\t\t\t\t  }\r\n\t\t\t});\r\n\t\t\tfileID.push(p)\r\n\t\t})\r\n\t\tfileID = await Promise.all(fileID)\r\n\t\tfileID = fileID.map((item) => {\r\n\t\t\t  return item.fileID;\r\n\t\t\t})\r\n\t\t\treturn fileID;\r\n\t },\r\n\t \r\n\t //验证房源信息模块\r\n\t houseInfoVerify(){\r\n\t\t const housedata  = this.$store.state.baseInfo\r\n\t\t \r\n\t\t  // 1. 位置信息验证\r\n\t\t   if (!housedata.address || !housedata.longitude || !housedata.latitude) {\r\n\t\t     uni.showToast({ \r\n\t\t \t\t\t\ttitle: '房源信息中未选择地图位置',\r\n\t\t \t\t\t\ticon:'none',\r\n\t\t \t\t\t\tduration:3000});\r\n\t\t     return false;\r\n\t\t   }\r\n\t\t // 2. 联系方式验证\r\n\t\t \r\n\t\t if (!housedata.wechat && !housedata.phone) {\r\n\t\t     uni.showToast({ title: '房源信息至少填写一种联系方式', icon: 'none' });\r\n\t\t \t return false;\r\n\t\t }\r\n\t\t if (housedata.phone && !/^1[3-9]\\d{9}$/.test(housedata.phone)) {\r\n\t\t      uni.showToast({ title: '手机号格式不正确', icon: 'none' });\r\n\t\t \t return false;\r\n\t\t }\r\n\t\t   // 3. 房源基本信息验证\r\n\t\t   if (!housedata.title.trim())\r\n\t\t   {\r\n\t\t\t   uni.showToast({ title: '房源信息中未填写标题', icon: 'none',duration:3000 });\r\n\t\t\t    return false;\r\n\t\t   }\r\n\t\t   if (!housedata.location.trim()){\r\n\t\t\t   uni.showToast({ title: '房源信息中未填写具体地点', icon: 'none' });\r\n\t\t\t    return false;\r\n\t\t   }\r\n\t\t   if (!housedata.area.trim()) {\r\n\t\t       uni.showToast({ title: '房源信息中未填写面积', icon: 'none' });\r\n\t\t \treturn false;\r\n\t\t   }\r\n\t\t   return true;\r\n\t },\r\n\t //房间信息验证模块\r\n\t roomsVerify(){\r\n\t\t //4.最后一间房信息验证\r\n\t\t   if(this.roomdata.RoomNumber.trim()!=''&&this.roomdata.RoomAddress.trim()!=''&&this.roomdata.RoomType.trim()!='')\r\n\t\t   {\r\n\t\t   \t\t\t \t\r\n\t\t\t\t\t\tthis.$store.commit('UPDATE_ROOM',{index:this.roomCount,data:this.roomdata})\r\n\t\t\t\t\t\tthis.$store.commit('UPDATE_BASEROOMS',{index:this.roomCount,data:this.roomdata})\r\n\t\t\t\t\t\tconsole.log(\"roomsVerify\")\r\n\t\t   }else{\r\n\t\t\t   uni.showToast({\r\n\t\t\t\ttitle:\"房间信息不能为空\",\r\n\t\t\t\ticon:'none',\r\n\t\t\t\tduration:3000\r\n\t\t\t   });\r\n\t\t\t   return false;\r\n\t\t   }\r\n\t\t     \r\n\t\t\t// //5.所有房间支付选项验证\r\n\t\t\tconst rooms = this.$store.state.rooms\r\n\t\t   for (var i = 0; i < rooms.length; i++) {\r\n\t\t   \tconst validPayments = Object.values(rooms[i].RoomPayment)\r\n\t\t   \t  .filter(amount => amount > 0);\r\n\t\t   \t\r\n\t\t   \tif (validPayments.length === 0) {\r\n\t\t   \t  uni.showToast({\r\n\t\t   \t\ttitle: '请至少设置一种有效的支付价格',\r\n\t\t   \t\ticon: 'none',\r\n\t\t   \t\tduration: 3000\r\n\t\t   \t  });\r\n\t\t   \t   return false;\r\n\t\t   \t}\r\n\t\t\t\r\n\t\t\t// 6. 媒体文件验证i\r\n\t\t\t\r\n\t\t\tif (rooms[i].RoomVideo.length === 0) {\r\n\t\t\t  uni.showToast({\r\n\t\t\t\ttitle: '请至少上传一个视频文件',\r\n\t\t\t\ticon: 'none',\r\n\t\t\t\tduration: 3000\r\n\t\t\t  });\r\n\t\t\t  console.log(\"请至少上传一个视频文件\")\r\n\t\t\t  return false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t   }\r\n\t\t   \r\n\t\t \r\n\t },\r\n\t //上传表单信息\r\n\t sumbit(){\r\n\t\t console.log(this.$store.state.baseInfo)\r\n\t\t const res = wx.cloud.callContainer({\r\n\t\t     \"config\": {\r\n\t\t       \"env\": \"prod-7g3ji5ui73a4702f\"\r\n\t\t     },\r\n\t\t     \"path\": \"/api/house/submit\",\r\n\t\t     \"header\": {\r\n\t\t       \"X-WX-SERVICE\": \"springboot-x535\",\r\n\t\t       \"content-type\": \"application/json\"\r\n\t\t     },\r\n\t\t     \"method\": \"POST\",\r\n\t\t     \"data\": this.$store.state.baseInfo,\r\n\t\t \t\r\n\t\t   })\r\n\t\t   console.log(res)\r\n\t\t   res.then(response => {\r\n\t\t   // 在这里可以访问 response 对象\r\n\t\t   console.log(\"API 响应:\", response);\r\n\t\t   \r\n\t\t   // 检查 HTTP 状态码\r\n\t\t   if (response.statusCode === 200) {\r\n\t\t \t// 检查业务状态码\r\n\t\t \tif (response.data.code === \"200\") {\r\n\t\t \t  console.log(\"操作成功:\", response.data.msg);\r\n\t\t\t  this.$store.commit('CLEAR_ALL_DATA');\r\n\t\t \t this.msg = response.data.msg;\r\n\t\t \t this.$refs.success.open('center');\r\n\t\t \t} else {\r\n\t\t \t  console.error(\"业务错误:\", response.data.msg);\r\n\t\t \t this.msg = response.data.msg;\r\n\t\t \t this.$refs.error.open('center');\r\n\t\t \t}\r\n\t\t   } else {\r\n\t\t \tconsole.error(\"HTTP 错误:\", response.statusCode);\r\n\t\t \t// 错误处理逻辑...\r\n\t\t   }\r\n\t\t }).catch(error => {\r\n\t\t   console.error(\"请求失败:\", error);\r\n\t\t   // 错误处理逻辑...\r\n\t\t });\r\n\t\t \r\n\t }\r\n\t //\r\n\t  \r\n\t  \r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n\t.houseitem{\r\n\t\tdisplay: flex; \r\n\t\tflex-direction: column; \r\n\t\twidth: 120rpx;\r\n\t\theight: 120rpx;\r\n\t\tmargin: 5rpx;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.prop {\r\n\t  width: 280px; \r\n\t  height: 250px; \r\n\t  background-color: aliceblue; \r\n\t  border-radius: 10px; \r\n\t  display: flex;\r\n\t  flex-direction: column;\r\n\t  align-items: center;       /* 水平居中 */\r\n\t  justify-content: center;   /* 垂直居中 */\r\n\t  padding: 20px 0;           /* 调整内边距 */\r\n\t  font-size: 20px;\r\n\t}\r\n\t.prop image {\r\n\t  width: 50px; \r\n\t  height: 50px; \r\n\t  margin-bottom: 30px;      /* 图片下间距 */\r\n\t}\r\n\t.prop text {\r\n\t  text-align: center;       /* 文本居中 */\r\n\t}\r\n\t.prop button {\r\n\t  width: 80%; \r\n\t  margin-top: 30px;         /* 按钮上间距 */\r\n\t}\r\n  .container {\r\n    padding: 20rpx;\r\n    background-color: #f5f5f5;\r\n  }\r\n  \r\n  .section {\r\n    background-color: #fff;\r\n    border-radius: 16rpx;\r\n    padding: 24rpx;\r\n    margin-bottom: 30rpx;\r\n    box-shadow: 0 4rpx 12rpx rgba(0,0,0,0.05);\r\n  }\r\n  \r\n  .section-title {\r\n    font-size: 32rpx;\r\n    font-weight: bold;\r\n    margin-bottom: 24rpx;\r\n    color: #333;\r\n  }\r\n  \r\n  .location-btn {\r\n    background-color: #07c160;\r\n    color: white;\r\n    border-radius: 12rpx;\r\n    font-size: 28rpx;\r\n    margin-bottom: 20rpx;\r\n  }\r\n  \r\n  .location-info {\r\n    background-color: #f9f9f9;\r\n    padding: 20rpx;\r\n    border-radius: 12rpx;\r\n    margin-top: 16rpx;\r\n  }\r\n  \r\n  .coords-container {\r\n    display: flex;\r\n    margin-top: 16rpx;\r\n  }\r\n  \r\n  .coord-item {\r\n    flex: 1;\r\n  }\r\n  \r\n  .info-label {\r\n    font-weight: bold;\r\n    color: #666;\r\n    margin-right: 10rpx;\r\n  }\r\n  \r\n  .info-value {\r\n    color: #333;\r\n  }\r\n  \r\n  .input {\r\n    height: 80rpx;\r\n    border: 1rpx solid #eee;\r\n    border-radius: 12rpx;\r\n    padding: 0 20rpx;\r\n    margin-bottom: 24rpx;\r\n    font-size: 28rpx;\r\n  }\r\n  \r\n  .payment-item {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 20rpx;\r\n  }\r\n  \r\n  .payment-input {\r\n    flex: 1;\r\n    height: 70rpx;\r\n    border: 1rpx solid #eee;\r\n    border-radius: 12rpx;\r\n    padding: 0 20rpx;\r\n    margin-right: 16rpx;\r\n    font-size: 28rpx;\r\n  }\r\n  \r\n  .payment-label {\r\n    width: 120rpx;\r\n    font-size: 26rpx;\r\n    color: #666;\r\n  }\r\n  \r\n  .add-payment {\r\n    background-color: #f0f0f0;\r\n    color: #666;\r\n    font-size: 26rpx;\r\n    margin-top: 10rpx;\r\n  }\r\n  \r\n  .submit-btn {\r\n    background-color: #07c160;\r\n    color: white;\r\n    border-radius: 12rpx;\r\n    font-size: 32rpx;\r\n    margin-top: 30rpx;\r\n  }\r\n  \r\n  .houseclass{\r\n  \tdisplay: flex;\r\n  \tflex-direction: row;\r\n  \tflex-wrap: wrap;\r\n  }\r\n</style>","import MiniProgramPage from 'E:/Manage_Project/demo/demo1/pages/marker/addMarker/NextRoom.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","wx","item","index"],"mappings":"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"}