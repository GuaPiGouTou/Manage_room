{"version":3,"file":"NextRoom.js","sources":["pages/marker/addMarker/NextRoom.vue","D:/文档/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbWFya2VyL2FkZE1hcmtlci9OZXh0Um9vbS52dWU"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 顶部导航 -->\n    <view class=\"header\">\n      <text class=\"header-title\">房间 {{currentRoomIndex + 1}}/{{baseInfo.count}}</text>\n      <view class=\"nav-buttons\">\n        <button v-if=\"currentRoomIndex > 0\" class=\"nav-btn\" @tap=\"prevRoom\">\n          上一个\n        </button>\n        <button v-if=\"currentRoomIndex < baseInfo.count - 1\" class=\"nav-btn\" @tap=\"nextRoom\">\n          下一个\n        </button>\n        <button v-else class=\"nav-btn\" @tap=\"submitAll\">\n          完成\n        </button>\n      </view>\n    </view>\n    \n    <!-- 房间信息表单 -->\n    <view class=\"section\">\n      <view class=\"section-title\">房间信息</view>\n      \n      <view class=\"input-group\">\n        <text class=\"input-label\">房间号</text>\n        <input class=\"input\" placeholder=\"如：101\" v-model=\"roomData.roomNumber\" />\n      </view>\n      \n      <view class=\"input-group\">\n        <text class=\"input-label\">房型</text>\n        <input class=\"input\" placeholder=\"如：主卧、次卧\" v-model=\"roomData.roomType\" />\n      </view>\n      \n      <view class=\"input-group\">\n        <text class=\"input-label\">视频上传</text>\n        <button class=\"upload-btn\" @tap=\"selectVideo\">\n          选择视频\n        </button>\n        \n        <view v-for=\"(video, idx) in roomData.videos\" :key=\"idx\" class=\"file-item\">\n          <text>视频 {{idx + 1}}</text>\n          <text>{{(video.size / 1024 / 1024).toFixed(2)}} MB</text>\n          <button class=\"delete-btn\" @tap=\"deleteVideo(idx)\">删除</button>\n        </view>\n      </view>\n      \n      <view class=\"input-group\">\n        <text class=\"input-label\">缩略图</text>\n        <button class=\"upload-btn\" @tap=\"selectThumbnail\">\n          选择缩略图\n        </button>\n        <image v-if=\"roomData.thumbnail\" :src=\"roomData.thumbnail\" class=\"thumbnail\"></image>\n      </view>\n      \n      <view class=\"input-group\">\n        <text class=\"input-label\">设施配置</text>\n        <view class=\"facilities-grid\">\n          <view \n            v-for=\"(facility, idx) in facilities\" \n            :key=\"idx\"\n            class=\"facility-item\"\n            :class=\"{active: roomData.facilities.includes(facility)}\"\n            @tap=\"toggleFacility(facility)\"\n          >\n            <text>{{facility}}</text>\n          </view>\n        </view>\n      </view>\n      \n      <view class=\"input-group\">\n        <text class=\"input-label\">支付方式</text>\n        <view class=\"payment-item\">\n          <text class=\"payment-label\">月付</text>\n          <input class=\"payment-input\" placeholder=\"价格\" v-model=\"roomData.paymentOptions.monthly\" />\n        </view>\n        <view class=\"payment-item\">\n          <text class=\"payment-label\">季付</text>\n          <input class=\"payment-input\" placeholder=\"价格\" v-model=\"roomData.paymentOptions.quarterly\" />\n        </view>\n        <view class=\"payment-item\">\n          <text class=\"payment-label\">年付</text>\n          <input class=\"payment-input\" placeholder=\"价格\" v-model=\"roomData.paymentOptions.yearly\" />\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { mapState, mapActions, mapGetters, mapMutations } from 'vuex'\n\nexport default {\n  data() {\n    return {\n      facilities: ['空调', '洗衣机', '冰箱', '厨房', '电视', 'WiFi', '书桌', '衣柜'],\n      roomData: {}\n    }\n  },\n  computed: {\n    ...mapState(['baseInfo', 'currentRoomIndex']),\n    ...mapGetters(['currentRoom'])\n  },\n  onLoad(options) {\n    // const index = parseInt(options.index) || 0\n    // this.SET_CURRENT_ROOM_INDEX(index)\r\n\tconsole.log(\"S+\"+baseInfo)\n    \n    // 初始化当前房间数据\n    this.roomData = {...this.currentRoom}\n  },\n  onUnload() {\n    // 离开页面时保存数据\n    this.saveRoomData()\n  },\n  methods: {\n    ...mapActions(['saveRoomInfo']),\n    ...mapMutations(['SET_CURRENT_ROOM_INDEX']),\n    \n    // 保存当前房间数据\n    saveRoomData() {\n      this.saveRoomInfo({\n        index: this.currentRoomIndex,\n        data: this.roomData\n      })\n    },\n    \n    // 上一个房间\n    prevRoom() {\n      this.saveRoomData()\n      const prevIndex = this.currentRoomIndex - 1\n      this.SET_CURRENT_ROOM_INDEX(prevIndex)\n      \n      // 更新显示的数据\n      this.roomData = {...this.currentRoom}\n      \n      // 更新URL参数\n      uni.redirectTo({\n        url: `/pages/marker/addMarker/NextRoom?index=${prevIndex}`\n      })\n    },\n    \n    // 下一个房间\n    nextRoom() {\n      this.saveRoomData()\n      const nextIndex = this.currentRoomIndex + 1\n      this.SET_CURRENT_ROOM_INDEX(nextIndex)\n      \n      // 更新显示的数据\n      this.roomData = {...this.currentRoom}\n      \n      // 更新URL参数\n      uni.redirectTo({\n        url: `/pages/marker/addMarker/NextRoom?index=${nextIndex}`\n      })\n    },\n    \n    // 选择视频\n    selectVideo() {\n      uni.chooseMedia({\n        count: 3,\n        mediaType: ['video'],\n        success: (res) => {\n          const newVideos = res.tempFiles.map(file => ({\n            name: file.tempFilePath.split('/').pop(),\n            size: file.size,\n            path: file.tempFilePath\n          }))\n          \n          this.roomData.videos = [...this.roomData.videos, ...newVideos]\n        }\n      })\n    },\n    \n    // 删除视频\n    deleteVideo(index) {\n      this.roomData.videos.splice(index, 1)\n    },\n    \n    // 选择缩略图\n    selectThumbnail() {\n      uni.chooseImage({\n        count: 1,\n        success: (res) => {\n          this.roomData.thumbnail = res.tempFilePaths[0]\n        }\n      })\n    },\n    \n    // 切换设施\n    toggleFacility(facility) {\n      const index = this.roomData.facilities.indexOf(facility)\n      if (index === -1) {\n        this.roomData.facilities.push(facility)\n      } else {\n        this.roomData.facilities.splice(index, 1)\n      }\n    },\n    \n    // 提交所有数据\n    submitAll() {\n      this.saveRoomData()\n      \n      // 这里可以添加提交到服务器的逻辑\n      console.log('所有房间数据:', this.$store.state.rooms)\n      \n      uni.showToast({\n        title: '提交成功',\n        icon: 'success',\n        success: () => {\n          // 跳转到成功页面或返回首页\n          uni.navigateBack({\n            delta: 999  // 返回首页\n          })\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style>\n.container {\n  padding: 20rpx;\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20rpx;\n  padding: 20rpx;\n  background-color: #f8f8f8;\n  border-radius: 12rpx;\n}\n\n.header-title {\n  font-size: 36rpx;\n  font-weight: bold;\n}\n\n.nav-buttons {\n  display: flex;\n  gap: 20rpx;\n}\n\n.nav-btn {\n  background-color: #007AFF;\n  color: white;\n  border-radius: 8rpx;\n  padding: 12rpx 24rpx;\n  font-size: 28rpx;\n}\n\n.section {\n  background-color: white;\n  border-radius: 16rpx;\n  padding: 24rpx;\n  margin-bottom: 30rpx;\n  box-shadow: 0 4rpx 12rpx rgba(0,0,0,0.05);\n}\n\n.section-title {\n  font-size: 32rpx;\n  font-weight: bold;\n  margin-bottom: 24rpx;\n  color: #333;\n}\n\n.input-group {\n  margin-bottom: 24rpx;\n}\n\n.input-label {\n  display: block;\n  margin-bottom: 8rpx;\n  font-weight: 500;\n  color: #333;\n}\n\n.input {\n  width: 100%;\n  height: 80rpx;\n  border: 1rpx solid #eee;\n  border-radius: 12rpx;\n  padding: 0 20rpx;\n  font-size: 28rpx;\n}\n\n.upload-btn {\n  background-color: #f0f0f0;\n  color: #333;\n  border-radius: 12rpx;\n  padding: 20rpx;\n  text-align: center;\n  margin-bottom: 16rpx;\n}\n\n.file-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16rpx;\n  background-color: #f9f9f9;\n  border-radius: 8rpx;\n  margin-bottom: 8rpx;\n}\n\n.delete-btn {\n  background-color: #ff4d4f;\n  color: white;\n  border-radius: 8rpx;\n  padding: 8rpx 16rpx;\n  font-size: 24rpx;\n}\n\n.thumbnail {\n  width: 200rpx;\n  height: 200rpx;\n  border-radius: 8rpx;\n  margin-top: 16rpx;\n}\n\n.facilities-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 16rpx;\n  margin-top: 16rpx;\n}\n\n.facility-item {\n  padding: 20rpx;\n  border: 1rpx solid #eee;\n  border-radius: 12rpx;\n  text-align: center;\n}\n\n.facility-item.active {\n  background-color: #e6f7ff;\n  border-color: #1890ff;\n  color: #1890ff;\n}\n\n.payment-item {\n  display: flex;\n  align-items: center;\n  margin-bottom: 16rpx;\n}\n\n.payment-label {\n  width: 120rpx;\n  font-size: 28rpx;\n  color: #666;\n}\n\n.payment-input {\n  flex: 1;\n  height: 70rpx;\n  border: 1rpx solid #eee;\n  border-radius: 12rpx;\n  padding: 0 20rpx;\n  font-size: 28rpx;\n}\n</style>","import MiniProgramPage from 'E:/Manage_Project/demo/demo1/pages/marker/addMarker/NextRoom.vue'\nwx.createPage(MiniProgramPage)"],"names":["mapState","mapGetters","uni","mapActions","mapMutations"],"mappings":"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"}